florina-mangment-system

# 🏪 نظام إدارة مقهى فلورينا

نظام إدارة شامل ومتطور لمقهى فلورينا يتضمن إدارة المبيعات، المخزون، العملاء، والتقارير.

## 🚀 المميزات الرئيسية

- **💰 نظام مبيعات متقدم** مع أسعار متدرجة للعملاء
- **📊 تقارير متقدمة** مع رسوم بيانية تفاعلية
- **📊 إدارة المخزون الذكية** مع تنبيهات المخزون المنخفض
- **👥 إدارة العملاء الشاملة** (محلات وموظفين)
- **👥 إدارة العملاء** (محلات مجاورة وموظفين)
- **🧾 نظام التسويات** التلقائي
- **📈 تقارير شاملة** ولوحة تحكم تفاعلية
- **📦 إدارة المخزون المتقدمة** مع تتبع المستويات
- **🔒 نظام أمان متقدم** مع صلاحيات متدرجة
- **📱 تصميم متجاوب** يعمل على جميع الأجهزة

## 🔐 بيانات تسجيل الدخول

### المستخدم الإداري:
- **البريد الإلكتروني:** `florinacafe@gmail.com`
- **كلمة المرور:** `123456789@@f`
- **الدور:** مدير عام (صلاحية كاملة)

### مستخدمين إضافيين للاختبار:
- **مدير العمليات:** `manager@florinacafe.com` / `manager123`
- **الكاشير:** `cashier@florinacafe.com` / `cashier123`

## 🛠️ التقنيات المستخدمة

- **Frontend:** React + TypeScript + Tailwind CSS
- **Backend:** Supabase (PostgreSQL)
- **المصادقة:** Supabase Auth
- **التخزين:** Supabase Database
- **النشر:** Netlify

## 📦 التثبيت والإعداد

### 1. استنساخ المشروع
```bash
git clone [repository-url]
cd florina-management-system
npm install
```

### 2. إعداد Supabase

#### الطريقة السهلة (مستحسنة):
1. **أنشئ مشروع جديد على [Supabase](https://supabase.com)**
   - سجل دخولك أو أنشئ حساب جديد
   - انقر على "New Project"
   - اختر اسماً للمشروع وكلمة مرور قوية
   - انتظر حتى يتم إنشاء المشروع (1-2 دقيقة)

2. **احصل على بيانات الاتصال:**
   - اذهب إلى Settings → API
   - انسخ "Project URL" من قسم Configuration
   - انسخ "anon public" key من قسم Project API keys

3. **اتصل بقاعدة البيانات:**
   - في التطبيق، انقر على "Connect to Supabase"
   - الصق البيانات في النموذج
   - انقر "اتصال"

4. **إعداد قاعدة البيانات:**
   - اذهب إلى SQL Editor في Supabase
   - انسخ والصق الكود التالي:

```sql
-- إنشاء schema
CREATE SCHEMA IF NOT EXISTS florina;
SET search_path TO florina, public;

-- إنشاء جدول المستخدمين
CREATE TABLE florina.users (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  email text UNIQUE NOT NULL,
  full_name text NOT NULL,
  role text DEFAULT 'employee',
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now()
);

-- إدراج المستخدم الإداري
INSERT INTO florina.users (email, full_name, role) VALUES
('florinacafe@gmail.com', 'مدير مقهى فلورينا', 'admin');
```

### 3. إنشاء قاعدة البيانات

#### للإعداد الكامل، شغل الملفات بالترتيب في Supabase SQL Editor:
```sql
-- من مجلد supabase/migrations/
-- شغل الملفات بالترتيب:
20250726092739_violet_violet.sql     -- الهيكل الأساسي
20250726092837_blue_sun.sql          -- الدوال والمحفزات  
20250726092910_quick_haze.sql        -- العروض
20250726092951_pink_thunder.sql      -- سياسات الأمان
20250726093020_blue_torch.sql        -- البيانات التجريبية
20250729032137_steep_mountain.sql    -- المستخدم الإداري
```

### 4. تشغيل التطبيق
```bash
npm run dev
```

## 🚨 حل المشاكل الشائعة

### مشكلة "قاعدة البيانات غير متصلة":
1. تأكد من صحة Project URL (يحتوي على supabase.co)
2. تأكد من صحة API Key (أطول من 100 حرف)
3. تحقق من اتصال الإنترنت
4. تأكد من أن المشروع نشط في Supabase

### مشكلة "الجداول غير موجودة":
1. اذهب إلى SQL Editor في Supabase
2. شغل ملفات المايجريشن بالترتيب
3. أو استخدم الكود السريع المذكور أعلاه

### مشكلة تسجيل الدخول:
1. تأكد من تشغيل ملف المستخدم الإداري
2. استخدم البيانات الصحيحة:
   - البريد: florinacafe@gmail.com
   - كلمة المرور: 123456789@@f

## 🏗️ هيكل قاعدة البيانات

### الجداول الرئيسية:
- **users** - المستخدمين والصلاحيات
- **product_categories** - فئات المنتجات
- **products** - المنتجات مع إدارة المخزون
- **stores** - المحلات المجاورة
- **employees** - الموظفين
- **sales** - المبيعات
- **daily_withdrawals** - السحوبات اليومية
- **settlements** - التسويات
- **audit_log** - سجل العمليات

### العروض المتخصصة:
- **v_sales_detailed** - عرض شامل للمبيعات
- **v_store_balances** - أرصدة المحلات
- **v_employee_balances** - أرصدة الموظفين
- **v_daily_reports** - التقارير اليومية
- **v_products_inventory** - المنتجات والمخزون
- **v_pending_settlements** - التسويات المعلقة
- **v_top_selling_products** - أفضل المنتجات مبيعاً

## 🔧 الميزات المتقدمة

### نظام الترقيم التلقائي:
- المبيعات: `SAL-20240124-000001`
- السحوبات: `WTH-20240124-000001`
- التسويات: `SET-20240124-000001`

### إدارة المخزون الذكية:
- تتبع المخزون للمنتجات المحددة
- تنبيهات المخزون المنخفض
- تحديث تلقائي عند البيع

### حساب الأرصدة التلقائي:
- تحديث أرصدة المحلات والموظفين فوراً
- تسوية الأرصدة عند إتمام التسويات
- تتبع حالة السحوبات

### سجل التدقيق الشامل:
- تسجيل جميع العمليات
- حفظ القيم القديمة والجديدة
- تتبع المستخدم والوقت

## 📊 لوحة التحكم

تتضمن لوحة التحكم:
- **إحصائيات المبيعات** اليومية والشهرية
- **رسوم بيانية تفاعلية** للمبيعات والعملاء
- **إجراءات سريعة** للعمليات الشائعة
- **آخر العمليات** في الوقت الفعلي

## 🔒 نظام الأمان

### الأدوار والصلاحيات:
- **Admin:** صلاحية كاملة على جميع البيانات
- **Manager:** إدارة العمليات والتقارير
- **Cashier:** المبيعات والسحوبات
- **Employee:** عرض البيانات الأساسية فقط

### حماية البيانات:
- Row Level Security (RLS)
- تشفير كلمات المرور
- حماية البيانات الشخصية
- سجل العمليات المحمي

## 📱 التصميم المتجاوب

- **تصميم متجاوب** يعمل على جميع الأجهزة
- **واجهة عربية** بالكامل مع دعم RTL
- **تصميم حديث** مع تأثيرات بصرية جذابة
- **تجربة مستخدم محسّنة** مع تنقل سهل

## 🚀 النشر

التطبيق منشور على: [https://wondrous-fenglisu-e51961.netlify.app](https://wondrous-fenglisu-e51961.netlify.app)

## 📞 الدعم

للحصول على المساعدة أو الإبلاغ عن مشاكل:
- البريد الإلكتروني: florinacafe@gmail.com
- الهاتف: 0500000000

---

**تم تطوير النظام بواسطة:** فريق تطوير مقهى فلورينا  
**تاريخ آخر تحديث:** يناير 2024  
**الإصدار:** 2.0.0
